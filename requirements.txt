# Core web framework
fastapi==0.109.1
uvicorn[standard]==0.23.2
aiofiles==23.2.1
jinja2==3.1.2

# Video and image processing
opencv-python-headless==4.8.1.78  # Headless version for server deployment
numpy==1.26.4  # Compatible with Python 3.11
Pillow>=10.0.0
scipy>=1.10.0
shapely>=2.0.0

# Deep learning
torch>=2.5.0  # Let pip resolve compatible version with torchvision
torchvision>=0.21.0  # Compatible with torch 2.6.0+
timm>=0.9.0

# Pretrained models
facenet-pytorch==2.5.2
ultralytics>=8.0.0,<8.1.0  # YOLOv8 (versions 8.0.x require Python <=3.11, which matches our runtime.txt)
deep-sort-realtime  # DeepSORT tracking (no version constraint - let pip find compatible version)
transformers==4.35.2  # For Mask2Former (optional - can be disabled if needed)
faiss-cpu  # FAISS for face embedding similarity search (CPU version for server)

# Database
SQLAlchemy>=2.0.0,<2.1.0  # Use stable 2.0.x version (2.1.2 doesn't exist)
pymysql>=1.0.0
psycopg2-binary>=2.9.0

# Optional / GAN / enhancement
torchmetrics==1.3.1  # sometimes needed for SRGAN/Zero-DCE

# Additional for deployment
python-multipart==0.0.6  # Required for file uploads in FastAPI
